<!-- EnFans Product Showcase -->
<div class="min-h-screen bg-base-200 flex flex-col">
  <!-- Navbar (Brand Only) -->
  <app-navbar (filterChange)="onCategoryChange($event)" />

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-4 flex-grow">

    <!-- Search Bar -->
    <app-search-bar (searchChange)="onSearchChange($event)" />

    <!-- Artist Selector -->
    <app-artist-selector (groupChange)="onGroupChange($event)" />

    <!-- Loading State -->
    @if (loading()) {
    <div class="flex justify-center items-center min-h-[400px]">
      <span class="loading loading-spinner loading-lg text-primary"></span>
    </div>
    }

    <!-- Error State -->
    @if (error() && !loading()) {
    <div class="alert alert-error shadow-lg max-w-2xl mx-auto">
      <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <span>{{ error() }}</span>
    </div>
    }

    <!-- Products Grid -->
    @if (!loading() && !error()) {
    @if (filteredProducts().length > 0) {
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 p-4 items-stretch">
      @for (product of filteredProducts(); track product.id) {
      <app-product-card [product]="product" />
      }
    </div>
    } @else {
    <div class="text-center py-16">
      <p class="text-sm text-gray-400 uppercase tracking-widest">no products found</p>
      <p class="text-xs text-gray-500 mt-2">try adjusting your filters</p>
    </div>
    }
    }
  </main>

  <!-- Footer -->
  <footer class="bg-black text-white py-8 mt-16">
    <div class="container mx-auto px-6">
      <div class="flex flex-col md:flex-row justify-between items-center gap-6">

        <!-- Brand -->
        <div class="text-center md:text-left">
          <p class="text-sm uppercase tracking-widest font-light">OnlyIf.Archive</p>
          <p class="text-xs text-gray-500 mt-1">curated // subversive // basics</p>
        </div>

        <!-- Social Links -->
        <div class="flex items-center space-x-6">
          <a href="https://www.instagram.com/moons.gene7/" target="_blank"
            class="text-gray-400 hover:text-white transition-colors text-xs uppercase tracking-wider">
            instagram
          </a>
          <span class="text-gray-600">·</span>
          <a href="https://www.youtube.com/@moons.gene7" target="_blank"
            class="text-gray-400 hover:text-white transition-colors text-xs uppercase tracking-wider">
            youtube
          </a>
        </div>

        <!-- Copyright -->
        <div class="text-center md:text-right">
          <p class="text-xs text-gray-500">© 2026 OnlyIf.Archive</p>
          <p class="text-xs text-gray-600 mt-1">all rights reserved</p>
        </div>

      </div>

      <!-- Affiliate Disclaimer -->
      <div class="mt-8 pt-6 border-t border-gray-800">
        <p class="text-xs font-mono text-gray-500 text-center max-w-3xl mx-auto leading-relaxed">
          DISCLAIMER: OnlyIf.Archive does not sell products directly. All links redirect to third-party retailers
          (Shein, Amazon, etc). We may earn a commission on qualifying purchases.
        </p>
      </div>
    </div>
  </footer>

</div>

<router-outlet />